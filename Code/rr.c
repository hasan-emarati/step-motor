#include <mega16a.h>      //????? ???????? ??????????? ??? 16//
#include <delay.h>        //delay ????? ????????//
void main(void)
{
int i;      //?? ????? ?? ????? ???? ??????? ?? ?????? ????? ??? ???//
//??? ?? ????? ???? ??? PWM ?? ?? ???? ??? ????? ??? D ?? ??? ??? 4 ?? ????//
DDRD=(0<<DDD7) | (0<<DDD6) | (0<<DDD5) | (1<<DDD4) | (0<<DDD3) | (0<<DDD2) | (0<<DDD1) | (0<<DDD0);
PORTD=(0<<PORTD7) | (0<<PORTD6) | (0<<PORTD5) | (0<<PORTD4) | (0<<PORTD3) | (0<<PORTD2) | (0<<PORTD1) | (0<<PORTD0);
//?? ?? 27 ?? 34 ??????? ???? ?????/????? 1 ????? ?? ????? ?? ?? ???? ?? ??????? ?? ?? ???? ???????? ????? ?? ????//
//?? ??? ?? ?????? ??????? ????? ?? ??????? ????????? ?????/????? 1 ????? ?? ?????? ????//
// Timer/Counter 1 initialization
// Clock source: System Clock
// Clock value: 1000/000 kHz
// Mode: Fast PWM top=OCR1A
// OC1A output: Disconnected
// OC1B output: Non-Inverted PWM
// Noise Canceler: Off
// Input Capture on Falling Edge
// Timer Period: 20 ms
// Output Pulse(s):
// OC1B Period: 20 ms Width: 0/400 ms
// Timer1 Overflow Interrupt: Off
// Input Capture Interrupt: Off
// Compare A Match Interrupt: Off
// Compare B Match Interrupt: Off
TCCR1A=(0<<COM1A1) | (0<<COM1A0) | (1<<COM1B1) | (0<<COM1B0) | (1<<WGM11) | (1<<WGM10);
TCCR1B=(0<<ICNC1) | (0<<ICES1) | (1<<WGM13) | (1<<WGM12) | (0<<CS12) | (0<<CS11) | (1<<CS10);
TCNT1H=0x00;
TCNT1L=0x00;
ICR1H=0x00;
ICR1L=0x00;
OCR1A=20000;     //???? ????? ?????? ?? ?? ???? ?? ??? ?? ???? ?? 20000 ????? ????? ?? 20 ???? ????? ???? ???? ??? ??? OCR1A ??????//
OCR1B=400;       //?? ???? ?? ??? ?? ???? ???? ?? ?? ???? ?? 400 ????? ????? ?? 0.4 ???? ???? ???? ???? ??? PWM ??? ???? ?????? OCR1B ??????//
                 //?? ??? 400 ?? 2400 ????? ??? ?? ???? ?? ?? ????? ??? ???? ??? ????? ???? ????? ?? ????? ??? ????? ???? ??? OCR1B ?????? for ?? ????? ?? ???? ?? ????//
while (1)
      {
      for(i=400;i<=2400;i++) {    //?? ???? OCR1B ????? ??? ?? ?? 400 ?? 2400 ????? ?? ??? ? ???? ?????? for ?? ????? ?? ????//
       OCR1B=i;
       delay_ms(2);
      }
      for(i=2400;i>=400;i--) {    //?? ???? OCR1B ????? ????? ???? ??? ???? ?? 2400 ??? ??? ?? ?? ??? ?? ?? 400 ???? ? ?????? ????? ?? ???? ?????? for ????//
       OCR1B=i;
       delay_ms(2);
      }
  }
}